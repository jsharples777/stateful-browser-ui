{"version":3,"file":"MacroEvaluator.js","sourceRoot":"","sources":["../../src/macros/MacroEvaluator.ts"],"names":[],"mappings":"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"}